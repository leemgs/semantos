load_module modules/ngx_http_grpc_web_module.so;

server {
    listen 8080;
    server_name _;

    # 정적 파일
    location / {
        root /usr/share/nginx/html;
        try_files $uri /index.html;
    }

    # gRPC-Web → gRPC 백엔드 변환 프록시 예시
    location /grpc/ {
        grpc_pass grpc://reasoner:50053;   # 실제 gRPC 서비스 주소/포트로 조정
        grpc_read_timeout 300s;
        grpc_send_timeout 300s;

        # grpc-web 변환 켜기
        grpc_web on;
    }
}
