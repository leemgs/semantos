server {
    listen 8080;

    # 1. Vue 애플리케이션 (정적 파일) 제공
    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    # 2. gRPC-Web 프록시 설정
    # /api/grpc 경로로 들어오는 요청을 Safety Runtime gRPC 서버로 전달합니다.
    location /api/grpc {
        # gRPC-Web 필수 헤더 설정
        grpc_web on;
        
        # 실제 Safety Runtime 주소 (Docker Compose 서비스 이름)
        grpc_pass grpc://safety-runtime:50051; 
    }
}